---
- name: Create docker system group
  when: docker_source_type == "git-release"
  group:
    name: docker
    state: present

- name: Create docker system  user
  when: docker_source_type == "git-release"
  user:
    name=docker
    comment="Docker user"
    shell=/sbin/nologin
    state=present
    system=yes
    groups=docker

- name: Add docker config file
  when: docker_source_type == "git-release"
  copy: src=docker dest={{ config_dir }}/docker

- name: Add docker socket service file
  when: docker_source_type == "git-release"
  copy: src=docker.socket dest={{ service_dir }}/docker.socket owner=root group=root mode=0755

- name: Add docker service file
  template: src="docker.service.j2" dest={{ service_dir }}/docker.service owner=root group=root mode=0755
